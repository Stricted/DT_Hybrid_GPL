CREATE TABLE [syncrecord] (
[id] INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
[localname]  VARCHAR(256)  NOT NULL,
[remotename] VARCHAR(256)  UNIQUE NOT NULL,
[remotetype] INTEGER NOT NULL
);

CREATE TABLE [synctask] (
[id] INTEGER NOT NULL,
[localfolder]  VARCHAR(4096) NOT NULL,
[remotefolder] VARCHAR(4096) NOT NULL,
[starttime] INTEGER  NULL,
[endtime] INTEGER  NULL,
[state] INTEGER NOT NULL,
[taskid] INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT
);

CREATE TABLE [syncdir] (
[taskid]  INTEGER NOT NULL,
[dirpath] VARCHAR(4096) NOT NULL,
[dirid]   INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT
);

CREATE TABLE [syncfile] (
[dirid]     INTEGER NOT NULL,
[filename]  VARCHAR(4096) NOT NULL,
[filetype]  INTEGER NOT NULL,
[mtime]     INTEGER NOT NULL  
);

CREATE TRIGGER [DELETE_SYNCDIR]
AFTER DELETE ON [syncdir]
FOR EACH ROW
BEGIN

delete from syncfile
where syncfile.dirid = OLD.dirid;

END
